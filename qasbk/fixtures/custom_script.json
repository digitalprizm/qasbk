[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Quotation", 
  "modified": "2016-11-24 21:23:05.619794", 
  "name": "Quotation-Client", 
  "script": "cur_frm.add_fetch('item_code','net_weight','net_weight');\ncur_frm.add_fetch('item_code','weight_uom','weight_uom');\ncur_frm.add_fetch('item_code','hs_code','hs_code');\ncur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.cscript.quantity_in_kg = function(doc, cdt, cdn) {\n    var item = frappe.get_doc(cdt, cdn);\n    var qty = item.net_weight ? (flt(item.quantity_in_kg)/1000) * flt(item.net_weight) : (flt(item.quantity_in_kg)/1000) * flt(1);\n    frappe.model.set_value(cdt, cdn, \"qty\", qty);\n};\ncur_frm.cscript.rate_per_kg = function(doc, cdt, cdn) {\n    var item = frappe.get_doc(cdt, cdn);\n    var rate = item.rate_per_kg * 1000;\n    frappe.model.set_value(cdt, cdn, \"rate\", rate);\n}\n\nfrappe.views.CommunicationComposer =  frappe.views.CommunicationComposer.extend({\n    make_fun: function(){\n        var me = this;\n        var content_field = me.dialog.fields_dict.content;\n        var subject_field = me.dialog.fields_dict.subject; \n        var recipients_field = me.dialog.fields_dict.recipients; \n        var sub = me.dialog.fields_dict.subject.get_value();\n        var rec = me.dialog.fields_dict.recipients.get_value();\n        var custom_rec=\"\";\n        var email_list=[];\n        var email_string=\"\"\n        frappe.call({\n                   method: \"frappe.client.get_list\",\n                   async: false,\n                   args: {\n                       doctype: \"Contact\",\n                       fields: [\"email_id\"],\n                       filters: { 'customer': cur_frm.doc.customer },\n                   },\n                      callback: function(res){\n                         if (res && res.message){\n                              console.log( res.message);\n\n                              $.each(res.message,function(i,d){\n                                   if(d[\"email_id\"]){\n                                     email_list.push(d[\"email_id\"])\n                                     email_string=String(email_string)+String(d[\"email_id\"])+String(\";\")\n                                    }\n                               });\n                               console.log(\"email list1\",email_list)\n                          }\n                      }     \n        });\n         recipients_field.set_input(email_string)\n         // content_field.set_input(\"<br><b>\"+cur_frm.doc.name+ \"<br>\"+cur_frm.doc.transaction_date+\"</b><br><br>To,<br> \"+cur_frm.doc.customer_name+\"<br>\"+cur_frm.doc.address_display+ \"<br><b>KIND ATTN: \"+cur_frm.doc.contact_display+\"</b><br><br>\"+cur_frm.doc.response);\n    \n\n    },\n    make: function(){\n        this._super();\n        this.make_fun();\n    }\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2016-11-24 21:25:41.091950", 
  "name": "Sales Order-Client", 
  "script": "cur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.add_fetch('item_code','hs_code','hs_code');\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2016-11-24 21:25:34.248456", 
  "name": "Sales Invoice-Client", 
  "script": "cur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.add_fetch('item_code','hs_code','hs_code');\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Delivery Note", 
  "modified": "2016-11-24 21:25:25.021849", 
  "name": "Delivery Note-Client", 
  "script": "cur_frm.add_fetch('item_code','hs_code','hs_code');\ncur_frm.add_fetch('customer','sales_person','sales_person');\nfrappe.ui.form.on(\"Delivery Note\", \"onload\", function(frm) {\n   cur_frm.set_value(\"print_out_date\",frappe.datetime.nowdate())\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Dropbox Backup", 
  "modified": "2016-08-12 21:58:13.201105", 
  "name": "Dropbox Backup-Client", 
  "script": "frappe.ui.form.on(\"Dropbox Backup\", \"refresh\", function(frm){\n\tif(frm.doc.send_backups_to_dropbox){\n\t\tfrm.add_custom_button(__(\"Take Backup\"), function() {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.integrations.doctype.dropbox_backup.dropbox_backup.take_backups_dropbox\",\n\t\t\t\tfreeze: true,\n\t\t\t\tfreeze_message: __(\"Taking backup\"),\n\t\t\t\tcallback: function(r){\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Backup taken successfully\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Error while taking backup. <br /> \" + r.exc));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t})\t\n\t}\n});", 
  "script_type": "Client"
 }
]