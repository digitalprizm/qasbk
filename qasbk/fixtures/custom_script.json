[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Quotation", 
  "modified": "2017-03-15 23:48:48.679599", 
  "name": "Quotation-Client", 
  "script": "\ncur_frm.add_fetch('item_code','net_weight','net_weight');\ncur_frm.add_fetch('item_code','weight_uom','weight_uom');\ncur_frm.add_fetch('item_code','hs_code','hs_code');\ncur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.add_fetch('customer','owner','customer_owner');\n\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Quotation\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.transaction_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.transaction_date)\n\tvar ym = \"CT-\"+abbr_series+\"-QTN-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})\n\ncur_frm.cscript.quantity_in_kg = function(doc, cdt, cdn) {\n    var item = frappe.get_doc(cdt, cdn);\n    var qty = item.net_weight ? (flt(item.quantity_in_kg)/1000) * flt(item.net_weight) : (flt(item.quantity_in_kg)/1000) * flt(1);\n    frappe.model.set_value(cdt, cdn, \"qty\", qty);\n};\ncur_frm.cscript.rate_per_kg = function(doc, cdt, cdn) {\n    var item = frappe.get_doc(cdt, cdn);\n    var rate = item.rate_per_kg * 1000;\n    frappe.model.set_value(cdt, cdn, \"rate\", rate);\n}\n\nfrappe.views.CommunicationComposer =  frappe.views.CommunicationComposer.extend({\n    make_fun: function(){\n        var me = this;\n        var content_field = me.dialog.fields_dict.content;\n        var subject_field = me.dialog.fields_dict.subject; \n        var recipients_field = me.dialog.fields_dict.recipients; \n        var sub = me.dialog.fields_dict.subject.get_value();\n        var rec = me.dialog.fields_dict.recipients.get_value();\n        var custom_rec=\"\";\n        var email_list=[];\n        var email_string=\"\"\n        frappe.call({\n                   method: \"frappe.client.get_list\",\n                   async: false,\n                   args: {\n                       doctype: \"Contact\",\n                       fields: [\"email_id\"],\n                       filters: { 'customer': cur_frm.doc.customer },\n                   },\n                      callback: function(res){\n                         if (res && res.message){\n                              console.log( res.message);\n\n                              $.each(res.message,function(i,d){\n                                   if(d[\"email_id\"]){\n                                     email_list.push(d[\"email_id\"])\n                                     email_string=String(email_string)+String(d[\"email_id\"])+String(\";\")\n                                    }\n                               });\n                               console.log(\"email list1\",email_list)\n                          }\n                      }     \n        });\n        recipients_field.set_input(email_string)\n         // content_field.set_input(\"<br><b>\"+cur_frm.doc.name+ \"<br>\"+cur_frm.doc.transaction_date+\"</b><br><br>To,<br> \"+cur_frm.doc.customer_name+\"<br>\"+cur_frm.doc.address_display+ \"<br><b>KIND ATTN: \"+cur_frm.doc.contact_display+\"</b><br><br>\"+cur_frm.doc.response);\n        subject_field.set_input(\"ChemTech\"+\" - \"+sub);\n        var email_content = \"\"\n        email_content = \"<br>\"+\"Hello  \"+cur_frm.doc.customer_name+\",\"+\"<br>\"\n        email_content += \"<br>Your quotation is attached for: \"\n         for (var i in cur_frm.doc.items) {\n            var item = cur_frm.doc.items[i].item_code;\n            email_content += \"<br>\" + (parseInt(i)+1) +\". \" + cur_frm.doc.items[i][\"item_code\"]\n            console.log(cur_frm.doc.items[i][\"item_code\"]);\n            }  \n        email_content +=\"<br><br>Thank you for the enquiry.<br>\\ Kindly find the attached quotation herewith. Hope to hear from you soon.\"+\"<br><br><br><br><br>\"+\n         \"<br><img alt=' height='66' src='/files/C1ZkJ4i.png' width='146'>\\\n      <p>&nbsp;&nbsp;&nbsp; Trading &amp; Contracting</p>\\\n      <h4><span style='font-size: 14px; line-height: 1.42857143;'>&nbsp; </span><span style='font-weight: normal; font-size: 14px; line-height: 1.42857143;'>P. 44 627 300&nbsp; |&nbsp; info@chemma.com</span><span style='font-size: 14px; font-weight: normal; line-height: 1.42857;'>&nbsp; | </span><span style='font-size: 14px; line-height: 1.42857;'>\\\n      <a name='name_of_target'>www.chemma.com</a>\\\n      </span><span style='font-size: 14px; font-weight: normal; line-height: 1.42857;'>&nbsp;</span><span style='color: inherit; font-family: inherit; font-size: 14px; line-height: 1.42857;'><span style='font-weight: normal;'>|&nbsp; </span></span><span style='color: inherit; font-family: inherit; line-height: 1.3em; font-size: 14px; text-indent: 7.05pt;'><span style='font-weight: normal;'>PB No. 40233&nbsp; |&nbsp; Doha&nbsp; |&nbsp; Qatar</span></span></h4>\\\n      <hr style='margin-top: 0em; margin-bottom: 0em;'>\"\n        content_field.set_input(email_content);    \n         \n\n\n    },\n    make: function(){\n        this._super();\n        this.make_fun();\n    }\n});\n", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Order", 
  "modified": "2017-03-16 10:21:44.634038", 
  "name": "Sales Order-Client", 
  "script": "cur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.add_fetch('item_code','hs_code','hs_code');\ncur_frm.add_fetch('customer','owner','customer_owner')\n\n\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Sales Order\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.transaction_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.transaction_date)\n\tvar ym = \"CT-\"+abbr_series+\"-SO-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Sales Invoice", 
  "modified": "2017-03-16 10:44:41.223362", 
  "name": "Sales Invoice-Client", 
  "script": "cur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.add_fetch('item_code','hs_code','hs_code');\ncur_frm.add_fetch('customer','owner','customer_owner');\n\n\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Sales Invoice\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.posting_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.posting_date)\n\tvar ym = \"CT-\"+abbr_series+\"-SI-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Delivery Note", 
  "modified": "2017-03-16 10:39:54.553032", 
  "name": "Delivery Note-Client", 
  "script": "cur_frm.add_fetch('item_code','hs_code','hs_code');\ncur_frm.add_fetch('customer','sales_person','sales_person');\ncur_frm.add_fetch('customer','owner','customer_owner');\nfrappe.ui.form.on(\"Delivery Note\", \"onload\", function(frm) {\n   cur_frm.set_value(\"print_out_date\",frappe.datetime.nowdate())\n});\n\n\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Delivery Note\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.posting_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.posting_date)\n\tvar ym = \"CT-\"+abbr_series+\"-DN-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Dropbox Backup", 
  "modified": "2016-08-12 21:58:13.201105", 
  "name": "Dropbox Backup-Client", 
  "script": "frappe.ui.form.on(\"Dropbox Backup\", \"refresh\", function(frm){\n\tif(frm.doc.send_backups_to_dropbox){\n\t\tfrm.add_custom_button(__(\"Take Backup\"), function() {\n\t\t\tfrappe.call({\n\t\t\t\tmethod: \"frappe.integrations.doctype.dropbox_backup.dropbox_backup.take_backups_dropbox\",\n\t\t\t\tfreeze: true,\n\t\t\t\tfreeze_message: __(\"Taking backup\"),\n\t\t\t\tcallback: function(r){\n\t\t\t\t\tif(!r.exc) {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Backup taken successfully\"));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tfrappe.msgprint(__(\"Error while taking backup. <br /> \" + r.exc));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t})\t\n\t}\n});", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Order", 
  "modified": "2017-03-16 13:10:53.902141", 
  "name": "Purchase Order-Client", 
  "script": "\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Purchase Order\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.transaction_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.transaction_date)\n\tvar ym = \"CT-\"+abbr_series+\"-PO-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Receipt", 
  "modified": "2017-03-16 13:13:14.588863", 
  "name": "Purchase Receipt-Client", 
  "script": "Date.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Purchase Receipt\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.posting_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.posting_date)\n\tvar ym = \"CT-\"+abbr_series+\"-PREC-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Purchase Invoice", 
  "modified": "2017-03-16 13:36:37.091864", 
  "name": "Purchase Invoice-Client", 
  "script": "\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Purchase Invoice\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.posting_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.posting_date)\n\tvar ym = \"CT-\"+abbr_series+\"-PI-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Journal Entry", 
  "modified": "2017-03-16 13:42:50.002084", 
  "name": "Journal Entry-Client", 
  "script": "\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Journal Entry\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.posting_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.posting_date)\n\tvar ym = \"CT-\"+abbr_series+\"-JV-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }, 
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Payment Entry", 
  "modified": "2017-03-16 13:58:21.558488", 
  "name": "Payment Entry-Client", 
  "script": "\nDate.prototype.getMonthName = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names[this.getMonth()];\n};\n\nDate.prototype.getMonthNameShort = function(lang) {\n    lang = lang && (lang in Date.locale) ? lang : 'en';\n    return Date.locale[lang].month_names_short[this.getMonth()];\n};\n\nDate.locale = {\n    en: {\n       month_names: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\n       month_names_short: ['JAN', 'FEB', 'MAR', 'APR', 'MAY', 'JUN', 'JUL', 'AUG', 'SEP', 'OCT', 'NOV', 'DEC']\n    }\n};\n\nfrappe.ui.form.on(\"Payment Entry\", \"validate\", function(frm) {\n\tabbr_series = 'aa'\n\tfrappe.call({\n\t        method: \"frappe.client.get_value\",\n                async:false,\n\t        args: {\n\t            doctype: \"Company\",\n\t            fieldname: \"abbr_series\",\n\t            filters: { name: cur_frm.doc.company },\n\t        },\n\t       \tcallback: function(res){\n\t          \tif (res && res.message){\n\t\t\t\t\t\tabbr_series=res.message['abbr_series']\n                          \n\t           \t}\n\t       \t}  \t\n\t    });\n\tvar ymd = frm.doc.posting_date;\n\tvar yy = ymd.substring(2,4);\n\tvar mm = ymd.substring(5,7);\n\tvar d = new Date(cur_frm.doc.posting_date)\n\tvar ym = \"CT-\"+abbr_series+\"-PE-\"+yy+\"-\"+ d.getMonthNameShort() + \"-.###\";\n\tfrm.set_value(\"naming_series\", ym);\n})", 
  "script_type": "Client"
 }
]